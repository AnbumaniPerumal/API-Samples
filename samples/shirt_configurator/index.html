    <html lang="en">
    <head>
      <meta charset="utf-8" />
      <title>Toy Configurator</title>

      <!-- simple color picker -->
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.0/jquery.js"></script>
      <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
      <script src="jquery.simplecolorpicker.js"></script>

      <link rel="stylesheet" type="text/css" href="jquery.simplecolorpicker.css"/>
      <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />

      <!-- raphael -->
      <script src="raphael.js"></script>
      <script src="colorpicker.js"></script>
      <script src="colorwheel.js"></script>

      <!-- LAGOA API -->
      <script src="../../build/lapi.js"></script>

      <!-- Bootstrap -->
      <!-- Latest compiled and minified CSS -->
      <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0-rc2/css/bootstrap.min.css" rel="stylesheet">

      <!-- Latest compiled and minified JavaScript -->
      <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0-rc2/js/bootstrap.min.js"></script>

      <!-- Latest Glyphicons minified CSS -->
      <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0-rc2/css/bootstrap-glyphicons.css" rel="stylesheet">

      <style media="screen">
        body {
          background: #333;
          color: #999;
          font: 300 100.01%/1.2 "Segoe UI", "Helvetica Neue", Helvetica, "Arial Unicode", Arial, sans-serif;
          margin: 0;
        }
        #lagoaframe {
          float : right;
          width : 650px;
          height: 100%;
        }

        #content {
          width: 640px;
          height: 480px;
          position: relative;
        }
        #slider{
          /*width: 200px;*/
        }
        .row{
          margin:0;
          padding-left: 50px;
        }
        #copy a {
          color: #666;
          text-decoration: none;
        }
        #picker2 {
          width: 300px;
          position: absolute;
          top: 250px;
          left: 50%;
          margin-left: -150px;
        }
        #output {
          display:none;
          background: #eee;
          position: absolute;
          font-size: 30px;
          bottom: 10px;
          left: 20px;
          font-family: monospace;
        }
        #copy {
          display:none;
          position: absolute;
          right: 10px;
          bottom: 10px;
          margin: 0;
          font-size: .6em;
          color: #666;
        }
        #values {
          display:none;
          position: absolute;
          left: 20px;
          top: 363px;
          font-size: .7em;
        }
        button{
          width:100px;
          height:50px;
        }

      </style>

    </head>
    <body class="ui-widget-content" style="border: 0;">
      <div class="row">
        <div class="span4">
          <!-- LAGOA frame -->
          <iframe src="https://lagoa.com/embed_links/496?validationHash=WBKWMLHp2WNaPBFDUmQhsw&width=500&height=330&fontcolor=&auto_load_scene=true&lagoa_logo=true" id="lagoaframe" width="500" height="330" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
        </div>
        <div class="span8">
          <div class="row">
            <div id="content">
              <table id="values">
                <tr>
                  <th>R</th>
                  <td id="vr"></td>
                  <th>H</th>
                  <td id="vh"></td>
                  <th>H</th>
                  <td id="vh2"></td>
                </tr>
                <tr>
                  <th>G</th>
                  <td id="vg"></td>
                  <th>S</th>
                  <td id="vs"></td>
                  <th>S</th>
                  <td id="vs2"></td>
                </tr>
                <tr>
                  <th>B</th>
                  <td id="vb"></td>
                  <th>B</th>
                  <td id="vv"></td>
                  <th>L</th>
                  <td id="vl"></td>
                </tr>
              </table>
              <input type="text" id="output" value="#eeeeee">
              <p id="copy">
                Powered by <a href="http://raphaeljs.com/">Raphaël</a>
              </p>
            </div>
            <div id="picker2"></div>
            <button name="js_orbit">Orbit Tool</button>
            <button name="js_pan">Pan Tool</button>
            <button name="js_move">Move Tool</button>
            <button name="js_scale">Scale Tool</button>
            <div id="slider">Zoom</div>
          </div>
        </div>
      </div>

      <script>
        // some constants
        var ONE_OVER_255 = 1/255;

        // add some buttons
        $('button[name="js_orbit"]').bind( "click", function(){
          lapi.orbitTool();
        });

        $('button[name="js_pan"]').bind( "click", function(){
          lapi.panTool();
        });

        $('button[name="js_move"]').bind( "click", function(){
          lapi.moveTool();
        });

        $('button[name="js_scale"]').bind( "click", function(){
          lapi.scaleTool();
        });

        // lens zoom slider
        function refreshSlider(e, nr){
          var cam = lapi.getCamera();
          cam.properties.getProperty("Lens").parameters.Zoom.value = nr.value;
        }

        $( "#slider" ).slider( { orientation: "vertical",
        range: "min",
        min : 33,
        max: 100,
        value: 0.1,
        slide: refreshSlider,
        change: refreshSlider });

        // Color picker
        Raphael(function () {
          var out = document.getElementById("output"),
            vr = document.getElementById("vr"),
            vg = document.getElementById("vg"),
            vb = document.getElementById("vb"),
            vh = document.getElementById("vh"),
            vh2 = document.getElementById("vh2"),
            vs = document.getElementById("vs"),
            vs2 = document.getElementById("vs2"),
            vv = document.getElementById("vv"),
            vl = document.getElementById("vl"),

          // this is where colorpicker created
            cp = Raphael.colorpicker(40, 20, 300, "#eee"),
            cp2 = Raphael.colorwheel(360, 20, 300, "#eee"),

            clr = Raphael.color("#eee");
          vr.innerHTML = clr.r;
          vg.innerHTML = clr.g;
          vb.innerHTML = clr.b;
          vh.innerHTML = vh2.innerHTML = Math.round(clr.h * 360) + "°";
          vs.innerHTML = vs2.innerHTML = Math.round(clr.s * 100) + "%";
          vv.innerHTML = Math.round(clr.v * 100) + "%";
          vl.innerHTML = Math.round(clr.l * 100) + "%";
          out.onkeyup = function () {
            cp.color(this.value);
            cp2.color(this.value);
          };
          // assigning onchange event handler
          var onchange = function (item) {
            return function (clr) {
              out.value = clr.replace(/^#(.)\1(.)\2(.)\3$/, "#$1$2$3");
              item.color(clr);
              out.style.background = clr;
              out.style.color = Raphael.rgb2hsb(clr).b < .5 ? "#fff" : "#000";
              clr = Raphael.color(clr);
              vr.innerHTML = clr.r;
              vg.innerHTML = clr.g;
              vb.innerHTML = clr.b;
              vh.innerHTML = vh2.innerHTML = Math.round(clr.h * 360) + "°";
              vs.innerHTML = vs2.innerHTML = Math.round(clr.s * 100) + "%";
              vv.innerHTML = Math.round(clr.v * 100) + "%";
              vl.innerHTML = Math.round(clr.l * 100) + "%";

              var obj = lapi.getActiveScene().getObjectByName("Interior Shirt 2 - Glossy Diffuse BRDF 2")[0];

              if(obj){

                // we are interested in changing the reflectance property
                var reflectance = obj.properties.getProperty("reflectance");

                // pow 2 is just for gamma correction
                reflectance.parameters.Red.value   = Math.pow( clr.r * ONE_OVER_255, 2 );
                reflectance.parameters.Green.value = Math.pow( clr.g * ONE_OVER_255, 2 );
                reflectance.parameters.Blue.value  = Math.pow( clr.b * ONE_OVER_255, 2 );
              }
            };
          };
          cp.onchange = onchange(cp2);
          cp2.onchange = onchange(cp);
          // that’s it. Too easy
        });


        $(document).ready(function() {

          // called once the scene is fully loaded – warning: geometry might not be present!
          lapi.onSceneLoaded = function(){

            // set some defaults
            var scn = lapi.getActiveScene();
            var cam = scn.getCameras()[0];
            cam.getProperty("Lens").getParameter("Depth of field radius").value = 0;
            cam.getProperty("Resolution").getParameter("Width").value = 720;

            // make sure nothing is selected
            lapi.desselectAll();

            // start rendering and hide meshes
            setTimeout( function(){
              // now we will set all the GL meshes to not visible
              var meshes = scn.getMeshes();
              for( var m in meshes ){
                meshes[m].getProperty("Visibility").getParameter("Visible").value = false;
              }

              // start rendering
              lapi.startRender()

            }, 2000 );
          };

          var RADIUS = 5;
          var SPEED = .005;

          lapi.stepCb = function(dt){
            var cam = lapi.getCamera();
            var pos = cam.properties.getProperty("Position");
            pos.parameters.x.value = RADIUS * Math.sin(SPEED*dt) * (2*Math.PI);
            pos.parameters.z.value = RADIUS * Math.cos(SPEED*dt) * (2*Math.PI);
          }

        });

      </script>

    </body>
    </html>